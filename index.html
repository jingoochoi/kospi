<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kospi fear and greed</title>
    <style>
        .load{
            position: fixed;
      width: 100%;
      height: 100%;
      background: white;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20px;
      z-index: 1000;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
</head>
<body>
    <div class="load">wait for a moment</div>
    <div class="fear" style="text-align: center;margin-top: 50px;position: absolute;left: 50%;transform: translateX(-50%);">
        <div class="idx" style="width: 100px;"></div>
        <div class="cool" style="display: flex;flex-direction: column;width: 100px;height: 500px;margin: 0 auto;position: absolute;">
            <div class="gr" style="background-color: green;width: 100%;height: 20%;border: 1px solid black;border-bottom: none;"></div>
            <div class="bl" style="background-color: blue;width: 100%;height: 20%;border: 1px solid black;border-bottom: none;"></div>
            <div class="wt" style="background-color: white;width: 100%;height: 20%;border: 1px solid black;border-bottom: none;"></div>
            <div class="yl" style="background-color: yellow;width: 100%;height: 20%;border: 1px solid black;border-bottom: none;"></div>
            <div class="rd" style="background-color: red;width: 100%;height: 20%;border: 1px solid black;"></div>
            <div class="poin" style="position: absolute;left: 100%;">◀</div>
        </div>
    </div>
    <script>
        let toda=new Date()
        let toyy=toda.getFullYear()
        let tomm=toda.getMonth()+1
        let todd=toda.getDate()
        let todo=`${toyy}${tomm<10?'0'+tomm:tomm}${todd<10?'0'+todd:todd}`
        console.log(todo)
        let data
        const ct=240
        fetch(`https://apis.data.go.kr/1160100/service/GetMarketIndexInfoService/getStockMarketIndex?resultType=json&serviceKey=sOb7ot96RtMpa2P3PSutZXvhCjcAkCB3wMSdc5uZW4tcoMtPAkako73u8bjtGoFQLK7A537L6zWeGTAiuMd08g%3D%3D&endBasDt=${todo}&idxNm=코스피`).then(a=>a.json()).then(b=>{
            let rate=b.response.body.items.item[0].fltRt
            data=rate*5+50
            console.log(data)
            $('.idx').text('today:'+data)
            $('.poin').css({bottom:(data-1.5)+'%'})
            $('.load').hide()
        })
    </script>
</body>
</html>